(function(e,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(e=typeof globalThis<"u"?globalThis:e||self,o(e["animate-loading"]={}))})(this,function(e){"use strict";const o={overlay:null,thickness:"3px",color:"gray",overlayColor:"#ffffff",overlayOpacity:.6,startDuration:1e3,finishDuration:300};class c{constructor(l=document.body,f={}){if(this.isLoading=!1,this.timeoutIds=[],this.setLoadingData=()=>{const{target:t,options:{startDuration:s,finishDuration:i,thickness:r,color:a,overlayColor:n,overlayOpacity:d}}=this,h=this.validateCSSLength(r)?r:"3px",u=this.validateCSSColor(a)?a:"gray",y=this.validateCSSColor(n)?n:"#ffffff";t.style.setProperty("--al-thickness",h),t.style.setProperty("--al-color",u),t.style.setProperty("--al-overlay-color",y),t.style.setProperty("--al-overlay-opacity",Math.min(1,Math.max(0,d)).toString()),t.style.setProperty("--al-start-duration",`${Math.max(0,s)}ms`),t.style.setProperty("--al-finish-duration",`${Math.max(0,i)}ms`)},this.validateCSSLength=t=>/^\d+(\.\d+)?(px|em|rem|%|vh|vw)$/.test(t.trim()),this.validateCSSColor=t=>[/^#[0-9a-fA-F]{3,8}$/,/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/,/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/,/^hsl\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*\)$/,/^[a-zA-Z]+$/].some(i=>i.test(t.trim())),this.start=()=>{if(this.isLoading){console.warn("AnimateLoading: Loading is already in progress. Call finish() first.");return}if(!this.target){console.error("AnimateLoading: target element is null or undefined");return}this.isLoading=!0,this.target.classList.add("al-loading-bar","start","loading"),this.overlay&&this.overlay.classList.add("al-loading-overlay","overlay-show")},this.finish=(t=()=>{})=>{if(!this.isLoading){console.warn("AnimateLoading: No loading in progress to finish");return}const{target:s,overlay:i,cleanUp:r,options:{finishDuration:a}}=this,n=window.getComputedStyle(s,"::before").width;s.style.setProperty("--al-end-width",n),s.classList.add("loaded"),s.classList.remove("loading"),window.requestAnimationFrame(()=>{s.classList.add("finished"),this.overlay&&i&&i.classList.remove("overlay-show")});const d=window.setTimeout(()=>{r(),this.isLoading=!1},a*2),h=window.setTimeout(t,a);this.timeoutIds.push(d,h)},this.cleanUp=()=>{this.target.classList.remove("al-loading-bar","start","loaded","finished"),this.overlay&&this.overlay.classList.remove("al-loading-overlay"),this.timeoutIds=this.timeoutIds.filter(t=>{try{return clearTimeout(t),!1}catch{return!1}})},this.destroy=()=>{this.timeoutIds.forEach(t=>clearTimeout(t)),this.timeoutIds=[],this.cleanUp(),this.isLoading=!1},!l||!(l instanceof HTMLElement))throw new Error("AnimateLoading: target must be a valid HTMLElement");this.options=Object.assign({},o,f),this.target=l,this.overlay=this.options.overlay,this.setLoadingData()}get loading(){return this.isLoading}}e.default=c,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
